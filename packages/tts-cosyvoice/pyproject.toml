# TTS CosyVoice Package - GPU TTS with PyTorch 2.3.1
# This is a standalone package that references workspace packages via path dependencies
[project]
name = "tts-cosyvoice"
version = "0.1.0"
description = "CosyVoice 2 TTS adapter for high-quality GPU speech synthesis"
requires-python = ">=3.12,<3.13"
dependencies = [
    # Workspace packages (via path dependencies)
    "proto",
    "common",
    "tts-base",

    # PyTorch 2.3.1 + CUDA 12.1 (PINNED for CosyVoice compatibility)
    # This is isolated from orchestrator's PyTorch 2.7.0
    "torch==2.3.1",
    "torchaudio==2.3.1",

    # Protobuf 4.x (PINNED for CosyVoice compatibility)
    # This is isolated from orchestrator's Protobuf 5.x
    "protobuf==4.24.4",

    # CosyVoice dependencies
    "modelscope>=1.31.0",
    "transformers>=4.40.0",
    "accelerate>=0.30.0",

    # Audio processing
    "numpy>=1.26.0",
    "scipy>=1.11.0",
]

[tool.uv.sources]
# Reference packages from the workspace
proto = { path = "../proto", editable = true }
common = { path = "../common", editable = true }
tts-base = { path = "../tts-base", editable = true }

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[tool.hatch.build.targets.wheel]
packages = ["src/tts/adapters/cosyvoice"]
