# =============================================================================
# CosyVoice 2 Worker Configuration
# =============================================================================
# GPU-based TTS, requires PyTorch 2.3.1 + CUDA 12.1 (isolated container)
#
# IMPORTANT: CosyVoice 2 has a PyTorch version conflict with the main project
# (requires 2.3.1, while main uses 2.7.0). Must run in isolated Docker container.
# See docs/COSYVOICE_PYTORCH_CONFLICT.md for details.
#
# This file contains CosyVoice-specific environment variables.
# Base variables are inherited from .env.defaults

# -----------------------------------------------------------------------------
# Worker Identity
# -----------------------------------------------------------------------------
WORKER_NAME=tts-cosyvoice
WORKER_GRPC_PORT=7002

# Default model to load on startup
DEFAULT_MODEL_ID=cosyvoice2-en-base

# -----------------------------------------------------------------------------
# CosyVoice-Specific Paths (inside container)
# -----------------------------------------------------------------------------
COSYVOICE_VOICEPACK_DIR=/app/voicepacks/cosyvoice
COSYVOICE_MODEL_PATH=/app/voicepacks/cosyvoice/en-base

# -----------------------------------------------------------------------------
# Performance Settings
# -----------------------------------------------------------------------------
USE_FLASH_ATTENTION=true
USE_FP16=true
USE_BF16=false
USE_TORCH_COMPILE=false

# -----------------------------------------------------------------------------
# Emotion Control
# -----------------------------------------------------------------------------
ENABLE_EMOTION_CONTROL=true
DEFAULT_EMOTION=neutral

# -----------------------------------------------------------------------------
# Resource Limits (heavier for GPU)
# -----------------------------------------------------------------------------
MAX_CONCURRENT_SESSIONS=8
WORKER_THREADS=4
ESTIMATED_VRAM_GB=6

# -----------------------------------------------------------------------------
# GPU Configuration
# -----------------------------------------------------------------------------
# CosyVoice requires GPU, override if using different device
CUDA_VISIBLE_DEVICES=0

# -----------------------------------------------------------------------------
# PyTorch Version (pinned for compatibility)
# -----------------------------------------------------------------------------
PYTORCH_VERSION=2.3.1
CUDA_VERSION=12.1

# -----------------------------------------------------------------------------
# Monitoring
# -----------------------------------------------------------------------------
WORKER_METRICS_PORT=9091
